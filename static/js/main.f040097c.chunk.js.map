{"version":3,"sources":["Header.js","Home.js","components/Firebase/context.js","components/Firebase/firebase.js","components/Firebase/index.js","components/Authentication/index.js","App.js","reportWebVitals.js","index.js"],"names":["Header","firebase","setIsSignedIn","className","auth","currentUser","displayName","style","marginBottom","onClick","signOut","then","document","location","href","ResultInput","onChangeResult","initialValue","disabled","React","useState","value","setValue","useEffect","type","min","onChange","event","target","Home","bets","setBets","a","getBets","functions","httpsCallable","res","sortedData","data","sort","b","moment","utc","kickoff","diff","console","log","forEach","x","home","result","away","alert","saveBets","catch","error","message","map","started","isAfter","finished","add","background","format","group","team","val","find","bet","FirebaseContext","createContext","config","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","databaseURL","Firebase","app","initializeApp","this","uiConfig","signInFlow","signInSuccessUrl","signInOptions","EmailAuthProvider","PROVIDER_ID","Authentication","props","isSignedIn","unregisterAuthObserver","onAuthStateChanged","user","firebaseAuth","App","Consumer","userName","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","Provider","getElementById"],"mappings":"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","file":"static/js/main.f040097c.chunk.js","sourcesContent":["import \"./App.css\";\nimport React from \"react\";\n\nfunction Header({ firebase, setIsSignedIn }) {\n  return (\n    <header className=\"App-header\">\n      {!firebase.auth.currentUser ? (\n        <h3>Logga in</h3>\n      ) : (\n        <>\n          <h3>{firebase.auth.currentUser.displayName}</h3>\n          <button\n            style={{ marginBottom: \"10px\" }}\n            onClick={() =>\n              firebase.auth.signOut().then(() => (document.location.href = \"/\"))\n            }\n          >\n            Logga ut\n          </button>\n        </>\n      )}\n    </header>\n  );\n}\n\nexport default Header;\n","import \"./App.css\";\nimport React from \"react\";\nimport moment from \"moment\";\n\nfunction Home({ firebase }) {\n  const [bets, setBets] = React.useState(null);\n\n  React.useEffect(() => {\n    async function getBets() {\n      const getBets = firebase.functions.httpsCallable(\"bets\");\n      const res = await getBets();\n      const sortedData = res.data.sort((a, b) =>\n        moment.utc(a.kickoff).diff(moment.utc(b.kickoff))\n      );\n      // const res = await fetch(\n      //   \"https://actions.d-e102.com/hook/1ecbea10-f9b6-4590-99c8-03f7fdfba55b\",\n      //   {\n      //     method: \"POST\",\n      //     headers: {\n      //       \"Content-Type\": \"application/json\",\n      //     },\n      //     body: JSON.stringify({\n      //       userId: \"dXNlci1jYWJhNTZlYi1iYmE3LTRkY2UtYmM5Mi1lOTAzZmUzYzIxZjk\",\n      //     }),\n      //   }\n      // );\n      // const data = await res.json();\n      setBets(sortedData);\n    }\n    getBets();\n  }, [firebase.functions]);\n  const saveBets = () => {\n    console.log(bets);\n    bets.forEach((x) => {\n      if (x.home.result < 0 || x.away.result < 0) {\n        return alert(\"Negativt resultat i match\");\n      }\n    });\n    // todo check for error\n    const saveBets = firebase.functions.httpsCallable(\"saveBets\");\n    saveBets({ bets: bets })\n      .then((result) => {\n        console.log(result);\n        setBets(result.data);\n      })\n      .catch((error) => {\n        console.error(\"onRejected function called: \" + error.message);\n      });\n  };\n  return (\n    <div className=\"Home\">\n      {!bets ? (\n        <h3>Loading</h3>\n      ) : (\n        <div className={\"Bet-container\"}>\n          <button onClick={() => saveBets()}>Spara</button>\n          <table>\n            <thead>\n              <tr>\n                <th>Kickoff</th>\n                <th>Group</th>\n                <th>Home</th>\n                <th></th>\n                <th></th>\n                <th>Away</th>\n              </tr>\n            </thead>\n            <tbody>\n              {bets.map((x) => {\n                console.log(x);\n                const kickoff = moment(x.kickoff);\n                const started = moment().isAfter(kickoff);\n                const finished = moment().add(\"3\", \"hours\").isAfter(kickoff);\n                return (\n                  <tr\n                    key={`${x.home.team}-${x.away.team}`}\n                    style={{ background: finished ? \"finished\" : \"\" }}\n                  >\n                    <td>{kickoff.format(\"YYYY-MM-DD HH:mm\")}</td>\n                    <td>{x.group}</td>\n                    <td>{x.home.team}</td>\n                    <td className=\"Bet-table-result\">\n                      <ResultInput\n                        onChangeResult={(val) => {\n                          const bet = bets.find((bet) => bet === x);\n                          bet.home.result = val;\n                          setBets(bets);\n                        }}\n                        initialValue={x.home.result}\n                        disabled={started}\n                      />\n                    </td>\n                    <td className=\"Bet-table-result\">\n                      <ResultInput\n                        onChangeResult={(val) => {\n                          const bet = bets.find((bet) => bet === x);\n                          bet.away.result = val;\n                          setBets(bets);\n                        }}\n                        initialValue={x.away.result}\n                        disabled={started}\n                      />\n                    </td>\n                    <td>{x.away.team}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n}\nconst ResultInput = ({ onChangeResult, initialValue, disabled }) => {\n  const [value, setValue] = React.useState(initialValue);\n  React.useEffect(() => {\n    onChangeResult(value);\n  });\n  return (\n    <input\n      value={value}\n      disabled={disabled}\n      type=\"number\"\n      min={0}\n      onChange={(event) => setValue(event.target.value)}\n    />\n  );\n};\nexport default Home;\n","import React from \"react\";\n\nconst FirebaseContext = React.createContext(null);\n\nexport default FirebaseContext;\n","import app from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/functions\";\n\nconst config = {\n  apiKey: \"AIzaSyBAJqLiR_0up73A5ewidTHHg8k8nU1s1BI\",\n  authDomain: \"skanskaspel-7f6dd.firebaseapp.com\",\n  projectId: \"skanskaspel-7f6dd\",\n  storageBucket: \"skanskaspel-7f6dd.appspot.com\",\n  messagingSenderId: \"903124138548\",\n  appId: \"1:903124138548:web:334599b1d92305a86ae861\",\n  measurementId: \"G-8QL506EK08\",\n  databaseURL: \"https://skanskaspel-7f6dd.firebaseio.com\", // TODO should this be used?\n};\n\nclass Firebase {\n  constructor() {\n    app.initializeApp(config);\n    this.auth = app.auth();\n    this.functions = app.app().functions(\"europe-west3\");\n\n    this.uiConfig = {\n      // Popup signin flow rather than redirect flow.\n      signInFlow: \"popup\",\n      // Redirect to /signedIn after sign in is successful. Alternatively you can provide a callbacks.signInSuccess function.\n      signInSuccessUrl: \"/\",\n      // We will display Google and Facebook as auth providers.\n      signInOptions: [app.auth.EmailAuthProvider.PROVIDER_ID],\n    };\n    if (process.env.NODE_ENV === \"development\") {\n      this.auth.useEmulator(\"http://localhost:9099\");\n      this.functions.useEmulator(\"localhost\", 5001);\n    }\n  }\n}\n\nexport default Firebase;\n","import FirebaseContext from \"./context\";\nimport Firebase from \"./firebase\";\n\nexport default Firebase;\n\nexport { FirebaseContext };\n","import React from \"react\";\nimport \"firebase/auth\";\nimport StyledFirebaseAuth from \"react-firebaseui/StyledFirebaseAuth\";\n\nfunction Authentication(props) {\n  const { firebase, isSignedIn, setIsSignedIn } = props;\n\n  // Listen to the Firebase Auth state and set the local state.\n  React.useEffect(() => {\n    const unregisterAuthObserver = firebase.auth.onAuthStateChanged((user) => {\n      console.log(user);\n      // setUserName(user.displayName);\n      setIsSignedIn(!!user);\n    });\n    return () => unregisterAuthObserver(); // Make sure we un-register Firebase observers when the component unmounts.\n  }, [firebase, setIsSignedIn]);\n\n  return !isSignedIn ? (\n    <div>\n      <StyledFirebaseAuth\n        uiConfig={firebase.uiConfig}\n        firebaseAuth={firebase.auth}\n      />\n    </div>\n  ) : null;\n}\nexport default Authentication;\n","import \"./App.css\";\nimport React from \"react\";\n\nimport Header from \"./Header\";\nimport Home from \"./Home\";\nimport { FirebaseContext } from \"./components/Firebase\";\nimport Authentication from \"./components/Authentication\";\n\nfunction App() {\n  const [isSignedIn, setIsSignedIn] = React.useState(false); // Local signed-in state.\n  // const [userName, setUserName] = React.useState(\"\"); // Local signed-in state.\n\n  return (\n    <FirebaseContext.Consumer>\n      {(firebase) => {\n        return (\n          <>\n            <Header\n              firebase={firebase}\n              userName={\"userName\"}\n              isSignedIn={isSignedIn}\n              setIsSignedIn={setIsSignedIn}\n            />\n            {isSignedIn ? (\n              <Home firebase={firebase} />\n            ) : (\n              <Authentication\n                firebase={firebase}\n                setIsSignedIn={setIsSignedIn}\n              />\n            )}\n          </>\n        );\n      }}\n    </FirebaseContext.Consumer>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport Firebase, { FirebaseContext } from \"./components/Firebase\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <FirebaseContext.Provider value={new Firebase()}>\n      <App />\n    </FirebaseContext.Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}